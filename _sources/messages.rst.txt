Ongoing Messages
================

Audio
-----

In order to stream the audio, the client sends :code:`audio` with the audio to transcribe.

- **type** (`string`): :code:`audio`.
- **audio** (`Array<integer>`): one audio chunk (must match the encoding, the length and the sampleRateHertz indicated in connection setup).
- **timestamp** (`integer`): timestamp of the beginning of audio.

Exemple:

.. code-block:: json

    {
	"type": "audio",
	"audio": [22, 0, -17, ..., 112],
        "timestamp": 1531587765
    }


Transcript
----------

We return transcripts to the client in :code:`transcript` messages:

- **type** (`string`): :code:`transcript`.
- **blocId** (`integer`): id of the trancript.
- **transcript** (`string`): transcript text.
- **isFinal** (`boolean`): if :code:`true`, then no more transcript associated to this :code:`blocId` will be published.

Exemple:

.. code-block:: json

    {
	"type": "transcript",
        "blocId": 1531587700,
        "transcript": "Hello, World.",
        "isFinal": true
    }

If two transcripts are sent with the same `blocId`, only the last one should be considered.
For each :code:`blocId`, we will send a transcript with a :code:`isFinal` field set to :code:`true`.

Please note that the blocId will be ordered: if a blocId is smaller than an other one, then the associated transcripts are ordered in the same way.


Ping / pong
-----------

We expect to receive at least one message every :code:`10s`. If during the connection (captioner ready or not), you think you may have a large period without sending message, you must send :code:`ping` message. We will send back a :code:`pong` message.

- **type** (`string`): :code:`ping` or :code:`pong`.

Exemple:

.. code-block:: json

    {
	"type": "ping",
    }

